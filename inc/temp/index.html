 <!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
</head>
<body>
    <a href="javascript:void(0)" class="start-exam-btn btn btn-primary px-5" onclick="window.open('https://jsfiddle.net/w49x9f1a/','winname','directories=no,titlebar=no,fullscreen = yes, toolbar=0,location=no,status=0, menubar=0, scrollbars=no,resizable=no,width='+screen.availWidth+', height='+screen.availHeight)">click</a>

<h1>Checks if you are in incognito mode</h1>
<div id="result"></div>
<script type="text/javascript">
 //    setInterval(function(){ alert("Hello"); }, 3000);
	// function isPrivateMode() {
 //            return new Promise(function detect(resolve) {
 //                var yes = function() { resolve(true); console.log('yes')}; // is in private mode
 //                var not = function() { resolve(false); console.log('not') }; // not in private mode

 //                function detectChromeOpera() {
 //                    var isChromeOpera = window.RequestFileSystem || window.webkitRequestFileSystem;

 //                    if (isChromeOpera) {
 //                        isChromeOpera(window.TEMPORARY, 100, function(isChromeOpera) {
 //                            return not();
 //                        }, function(err) {
 //                            return yes();
 //                        });
 //                    }

 //                    return !!isChromeOpera;
 //                }

 //                function detectFirefox() {
 //                    var isMozillaFirefox = 'MozAppearance' in document.documentElement.style;
 //                    if (isMozillaFirefox) {
 //                        if (indexedDB == null) yes();
 //                        else {
 //                            var db = indexedDB.open('inPrivate');
 //                            db.onsuccess = not;
 //                            db.onerror = yes;
 //                        }
 //                    }
 //                    return isMozillaFirefox;
 //                }

 //                function detectSafari() {
 //                    var isSafari = navigator.userAgent.match(/Version\/([0-9\._]+).*Safari/);
 //                    if (isSafari) {
 //                        var testLocalStorage = function() {
 //                        try {
 //                            if (localStorage.length) not();
 //                            else {
 //                            localStorage.setItem('inPrivate', '0');
 //                            localStorage.removeItem('inPrivate');
 //                            not();
 //                            }
 //                        } catch (_) {
 //                            // Safari only enables cookie in private mode
 //                            // if cookie is disabled, then all client side storage is disabled
 //                            // if all client side storage is disabled, then there is no point
 //                            // in using private mode
 //                            navigator.cookieEnabled ? yes() : not();
 //                        }
 //                        return true;
 //                        };

 //                        var version = parseInt(isSafari[1], 10);
 //                        if (version < 11) return testLocalStorage();
 //                        try {
 //                        window.openDatabase(null, null, null, null);
 //                        not();
 //                        } catch (_) {
 //                        yes();
 //                        }
 //                    }
 //                    return !!isSafari;
 //                }

 //                function detectEdgeIE10() {
 //                    var isEdgeIE10 = !window.indexedDB && (window.PointerEvent || window.MSPointerEvent);
 //                    if (isEdgeIE10) yes();
 //                    return !!isEdgeIE10;
 //                }

 //                // when a browser is detected, it runs tests for that browser
 //                // and skips pointless testing for other browsers.
 //                if (detectChromeOpera()) return;
 //                if (detectFirefox()) return;
 //                if (detectSafari()) return;
 //                if (detectEdgeIE10()) return;
                
 //                // default navigation mode
 //                return not();
 //            });
 //        }
        
 //        isPrivateMode()
</script>
    <script>
        function main() {
          var fs = window.RequestFileSystem || window.webkitRequestFileSystem;
          if (!fs) {
            result.textContent = "check failed?";
            return;
          }
          fs(window.TEMPORARY, 100, function(fs) {
            result.textContent = "it does not seem like you are in incognito mode";
          }, function(err) {
            result.textContent = "it seems like you are in incognito mode";
          });
        }
        main();

        var dd = chrome.fileSystem;

        console.log('ddd', navigator.appName);
    </script>
</body>
</html> 